<!--pages-gala/programs/index.wxml-->
<view class="container">
  <nav-bar title="èŠ‚ç›®å•" bgColor="#D32F2F" showBack="{{true}}"></nav-bar>

  <!-- è£…é¥°ç¯ç¬¼ -->
  <view class="lantern-left">ğŸ®</view>
  <view class="lantern-right">ğŸ®</view>

  <!-- æœç´¢æ  -->
  <view class="search-container">
    <view class="search-box">
      <image class="search-icon" src="/images/icon-search.png"></image>
      <input
        class="search-input"
        type="text"
        placeholder="æœç´¢èŠ‚ç›®æˆ–è¡¨æ¼”è€…"
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        confirm-type="search"
        bindconfirm="onSearchConfirm"
      />
      <view class="clear-icon" wx:if="{{searchKeyword}}" bindtap="onClearSearch">
        <text>âœ•</text>
      </view>
    </view>
  </view>

  <!-- å¹³å°ä¿¡æ¯ -->
  <view class="platform-header" wx:if="{{platform}}">
    <image class="platform-logo" src="{{platform.logo}}" mode="aspectFit"></image>
    <view class="platform-info">
      <view class="platform-name">{{platform.name}}</view>
      <view class="platform-time">{{platform.broadcast_time}}</view>
    </view>
  </view>

  <!-- èŠ‚ç›®åˆ—è¡¨ -->
  <view class="program-list">
    <view class="program-card" wx:for="{{filteredPrograms}}" wx:key="id">
      <view class="program-order">{{item.order}}</view>
      <view class="program-info">
        <view class="program-name">{{item.name}}</view>
        <view class="program-performers" wx:if="{{item.performers}}">
          {{item.performers}}
        </view>
      </view>
      <view class="program-type" wx:if="{{item.type}}">{{item.type}}</view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{filteredPrograms.length === 0 && !loading}}">
      <text class="empty-icon">ğŸ”</text>
      <text class="empty-text">æœªæ‰¾åˆ°ç›¸å…³èŠ‚ç›®</text>
      <text class="empty-hint">è¯•è¯•æœç´¢å…¶ä»–å…³é”®è¯</text>
    </view>

    <!-- åŠ è½½ä¸­ -->
    <view class="loading-state" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>
  </view>
</view>
