import{d as K,u as L,v as O,x as Q,o as y,c as X,a as t,b as a,w as o,t as n,n as k,y as S,r as c,i as $,j as A,h as f,z as B,l as F,q as Z,A as tt,f as st}from"./index-B1eIv2r7.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ot={class:"dashboard-page"},et={class:"welcome-section"},nt={class:"user-info"},lt={class:"user-details"},dt={class:"user-name"},it={class:"user-role"},rt={class:"stat-card redpack"},ct={class:"stat-content"},ut={class:"stat-value"},vt={class:"stat-card gala-platform"},_t={class:"stat-content"},mt={class:"stat-value"},pt={class:"stat-card gala-program"},ft={class:"stat-content"},gt={class:"stat-value"},wt={class:"stat-card total"},bt={class:"stat-content"},ht={class:"stat-value"},yt={class:"nav-icon redpack"},kt={class:"nav-arrow"},St={class:"nav-icon gala"},$t={class:"nav-arrow"},Dt={class:"nav-icon crawler"},xt={class:"nav-arrow"},Pt={class:"card activity-card"},Ct={class:"card-header"},Mt={class:"countdown-info"},zt={class:"countdown-grid"},Tt={class:"countdown-item"},Yt={class:"countdown-value"},It={class:"countdown-item"},Nt={class:"countdown-value"},Rt={class:"countdown-item"},At={class:"countdown-value"},Bt={class:"countdown-item"},Ft={class:"countdown-value"},Gt={class:"countdown-date"},jt={class:"card"},Ut={class:"card-header"},Vt={class:"card"},qt={class:"card-header"},Wt={style:{"font-size":"24px"}},Et="é©¬å¹´",Ht=K({__name:"Index",setup(Jt){st();const D=L(),g=$(!1),v=A({redpack:0,galaPlatform:0,galaProgram:0,total:0}),l=A({days:0,hours:0,minutes:0,seconds:0}),x=new Date().getFullYear(),G=Z(()=>l.days*86400+l.hours*3600+l.minutes*60+l.seconds<=0?"æ˜¥èŠ‚å¿«ä¹ï¼":"è·ç¦»æ˜¥èŠ‚è¿˜æœ‰"),j={super_admin:"è¶…çº§ç®¡ç†å‘˜",admin:"ç®¡ç†å‘˜",editor:"ç¼–è¾‘"},U={upcoming:"æœªå¼€å§‹",ongoing:"è¿›è¡Œä¸­",ended:"å·²ç»“æŸ"},V={upcoming:"info",ongoing:"success",ended:"info"},P=$([]),C=$([]);let w=null;const q=async()=>{g.value=!0;try{const e=await redpackService.adminGetPlatforms({page:1,pageSize:1});v.redpack=e.total||0;const s=await galaService.adminGetPlatforms({page:1,pageSize:1});v.galaPlatform=s.total||0,v.galaProgram=0,v.total=v.redpack+v.galaPlatform+v.galaProgram;const d=await redpackService.adminGetPlatforms({page:1,pageSize:5});P.value=d.list||[];const r=await galaService.adminGetPlatforms({page:1,pageSize:5});C.value=r.list||[].map(m=>({...m,programCount:0}))}catch(e){console.error("åŠ è½½ç»Ÿè®¡å¤±è´¥:",e)}finally{g.value=!1}},M=()=>{const e=S(),d=S(`${x}-01-29 00:00:00`).diff(e,"second");d>0?(l.days=Math.floor(d/86400),l.hours=Math.floor(d%86400/3600),l.minutes=Math.floor(d%3600/60),l.seconds=d%60):(l.days=0,l.hours=0,l.minutes=0,l.seconds=0)},W=e=>S(e).format("YYYY-MM-DD"),E=(e,s)=>{if(!e&&!s)return"-";let d="";if(e){const m=new Date(e),u=m.getFullYear(),p=String(m.getMonth()+1).padStart(2,"0"),b=String(m.getDate()).padStart(2,"0");d=`${u}-${p}-${b}`}const r=s||"";return d&&r?`${d} ${r.substring(0,5)}`:d||r};return O(()=>{q(),M(),w=setInterval(M,1e3)}),Q(()=>{w&&clearInterval(w)}),(e,s)=>{var N,R;const d=c("User"),r=c("el-icon"),m=c("el-avatar"),u=c("el-col"),p=c("el-row"),b=c("Wallet"),h=c("ArrowRight"),H=c("Monitor"),J=c("Connection"),z=c("el-tag"),T=c("el-button"),_=c("el-table-column"),Y=c("el-table"),I=tt("loading");return y(),X("div",ot,[t("div",et,[s[5]||(s[5]=t("div",{class:"welcome-content"},[t("h1",{class:"welcome-title"},"ðŸŽŠ æ˜¥èŠ‚å·¥å…·ç®¡ç†åŽå°"),t("p",{class:"welcome-subtitle"},"æ¬¢è¿Žä½¿ç”¨æ˜¥èŠ‚æ•°æ®ç®¡ç†ç³»ç»Ÿ")],-1)),t("div",nt,[a(m,{size:48,class:"user-avatar"},{default:o(()=>[a(r,null,{default:o(()=>[a(d)]),_:1})]),_:1}),t("div",lt,[t("div",dt,n(((N=k(D).user)==null?void 0:N.realName)||"ç®¡ç†å‘˜"),1),t("div",it,n(j[(R=k(D).user)==null?void 0:R.role]||"ç®¡ç†å‘˜"),1)])])]),a(p,{gutter:20,class:"stats-row"},{default:o(()=>[a(u,{xs:12,sm:12,md:6},{default:o(()=>[t("div",rt,[s[7]||(s[7]=t("div",{class:"stat-icon"},"ðŸ§§",-1)),t("div",ct,[t("div",ut,n(v.redpack),1),s[6]||(s[6]=t("div",{class:"stat-label"},"çº¢åŒ…æ´»åŠ¨",-1))])])]),_:1}),a(u,{xs:12,sm:12,md:6},{default:o(()=>[t("div",vt,[s[9]||(s[9]=t("div",{class:"stat-icon"},"ðŸ“º",-1)),t("div",_t,[t("div",mt,n(v.galaPlatform),1),s[8]||(s[8]=t("div",{class:"stat-label"},"æ˜¥æ™šå¹³å°",-1))])])]),_:1}),a(u,{xs:12,sm:12,md:6},{default:o(()=>[t("div",pt,[s[11]||(s[11]=t("div",{class:"stat-icon"},"ðŸŽ­",-1)),t("div",ft,[t("div",gt,n(v.galaProgram),1),s[10]||(s[10]=t("div",{class:"stat-label"},"æ˜¥æ™šèŠ‚ç›®",-1))])])]),_:1}),a(u,{xs:12,sm:12,md:6},{default:o(()=>[t("div",wt,[s[13]||(s[13]=t("div",{class:"stat-icon"},"ðŸ“Š",-1)),t("div",bt,[t("div",ht,n(v.total),1),s[12]||(s[12]=t("div",{class:"stat-label"},"æ€»æ•°æ®",-1))])])]),_:1})]),_:1}),a(p,{gutter:20,class:"quick-nav-row"},{default:o(()=>[a(u,{xs:24,sm:12,md:8},{default:o(()=>[t("div",{class:"nav-card",onClick:s[0]||(s[0]=i=>e.$router.push("/content/redpack"))},[t("div",yt,[a(r,null,{default:o(()=>[a(b)]),_:1})]),s[14]||(s[14]=t("div",{class:"nav-content"},[t("div",{class:"nav-title"},"çº¢åŒ…ç®¡ç†"),t("div",{class:"nav-desc"},"ç®¡ç†çº¢åŒ…æ´»åŠ¨ä¿¡æ¯")],-1)),t("div",kt,[a(r,null,{default:o(()=>[a(h)]),_:1})])])]),_:1}),a(u,{xs:24,sm:12,md:8},{default:o(()=>[t("div",{class:"nav-card",onClick:s[1]||(s[1]=i=>e.$router.push("/content/gala"))},[t("div",St,[a(r,null,{default:o(()=>[a(H)]),_:1})]),s[15]||(s[15]=t("div",{class:"nav-content"},[t("div",{class:"nav-title"},"æ˜¥æ™šç®¡ç†"),t("div",{class:"nav-desc"},"ç®¡ç†å¹³å°å’ŒèŠ‚ç›®")],-1)),t("div",$t,[a(r,null,{default:o(()=>[a(h)]),_:1})])])]),_:1}),a(u,{xs:24,sm:12,md:8},{default:o(()=>[t("div",{class:"nav-card",onClick:s[2]||(s[2]=i=>e.$router.push("/crawler"))},[t("div",Dt,[a(r,null,{default:o(()=>[a(J)]),_:1})]),s[16]||(s[16]=t("div",{class:"nav-content"},[t("div",{class:"nav-title"},"çˆ¬è™«ç®¡ç†"),t("div",{class:"nav-desc"},"æ•°æ®é‡‡é›†ä»»åŠ¡")],-1)),t("div",xt,[a(r,null,{default:o(()=>[a(h)]),_:1})])])]),_:1})]),_:1}),a(p,{gutter:20},{default:o(()=>[a(u,{span:24},{default:o(()=>[t("div",Pt,[t("div",Ct,[s[17]||(s[17]=t("h3",{class:"card-title"},"ðŸ“… æ˜¥èŠ‚å€’è®¡æ—¶",-1)),a(z,{type:"danger",size:"large",effect:"dark"},{default:o(()=>[f(n(G.value),1)]),_:1})]),t("div",Mt,[t("div",zt,[t("div",Tt,[t("div",Yt,n(l.days),1),s[18]||(s[18]=t("div",{class:"countdown-label"},"å¤©",-1))]),s[22]||(s[22]=t("div",{class:"countdown-separator"},":",-1)),t("div",It,[t("div",Nt,n(l.hours),1),s[19]||(s[19]=t("div",{class:"countdown-label"},"æ—¶",-1))]),s[23]||(s[23]=t("div",{class:"countdown-separator"},":",-1)),t("div",Rt,[t("div",At,n(l.minutes),1),s[20]||(s[20]=t("div",{class:"countdown-label"},"åˆ†",-1))]),s[24]||(s[24]=t("div",{class:"countdown-separator"},":",-1)),t("div",Bt,[t("div",Ft,n(l.seconds),1),s[21]||(s[21]=t("div",{class:"countdown-label"},"ç§’",-1))])]),t("div",Gt,"è·ç¦» "+n(k(x))+"å¹´æ˜¥èŠ‚ï¼ˆ"+n(Et)+"ï¼‰",1)])])]),_:1})]),_:1}),a(p,{gutter:20,class:"overview-row"},{default:o(()=>[a(u,{xs:24,md:12},{default:o(()=>[t("div",jt,[t("div",Ut,[s[26]||(s[26]=t("h3",{class:"card-title"},"ðŸ§§ çº¢åŒ…æ´»åŠ¨",-1)),a(T,{type:"primary",size:"small",onClick:s[3]||(s[3]=i=>e.$router.push("/content/redpack"))},{default:o(()=>[...s[25]||(s[25]=[f(" æŸ¥çœ‹å…¨éƒ¨ ",-1)])]),_:1})]),B((y(),F(Y,{data:P.value,style:{width:"100%"}},{default:o(()=>[a(_,{prop:"platform",label:"å¹³å°",width:"120"}),a(_,{prop:"title",label:"æ´»åŠ¨åç§°","show-overflow-tooltip":""}),a(_,{prop:"status",label:"çŠ¶æ€",width:"100"},{default:o(({row:i})=>[a(z,{type:V[i.status],size:"small"},{default:o(()=>[f(n(U[i.status]),1)]),_:2},1032,["type"])]),_:1}),a(_,{prop:"endTime",label:"ç»“æŸæ—¶é—´",width:"120"},{default:o(({row:i})=>[f(n(W(i.endTime)),1)]),_:1})]),_:1},8,["data"])),[[I,g.value]])])]),_:1}),a(u,{xs:24,md:12},{default:o(()=>[t("div",Vt,[t("div",qt,[s[28]||(s[28]=t("h3",{class:"card-title"},"ðŸ“º æ˜¥æ™šå¹³å°",-1)),a(T,{type:"primary",size:"small",onClick:s[4]||(s[4]=i=>e.$router.push("/content/gala"))},{default:o(()=>[...s[27]||(s[27]=[f(" æŸ¥çœ‹å…¨éƒ¨ ",-1)])]),_:1})]),B((y(),F(Y,{data:C.value,style:{width:"100%"}},{default:o(()=>[a(_,{label:"å›¾æ ‡",width:"60"},{default:o(({row:i})=>[t("span",Wt,n(i.emoji||"ðŸ“º"),1)]),_:1}),a(_,{prop:"name",label:"å¹³å°åç§°"}),a(_,{prop:"programCount",label:"èŠ‚ç›®æ•°",width:"80"}),a(_,{prop:"broadcastTime",label:"æ’­å‡ºæ—¶é—´",width:"150"},{default:o(({row:i})=>[f(n(E(i.airDate,i.airTime)),1)]),_:1})]),_:1},8,["data"])),[[I,g.value]])])]),_:1})]),_:1})])}}}),Ot=at(Ht,[["__scopeId","data-v-061ee7ba"]]);export{Ot as default};
