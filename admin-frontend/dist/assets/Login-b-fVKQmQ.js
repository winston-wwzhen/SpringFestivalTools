import{d as y,u as V,o as x,c as k,a as r,b as o,w as a,e as S,r as l,f as C,g as L,h as z,t as B,i as f,j as E,E as g}from"./index-B1eIv2r7.js";import{h as N}from"./request-DBgMPdsc.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U=m=>N.post("/auth/login",m),q={class:"login-page"},A={class:"login-box"},F=y({__name:"Login",setup(m){const _=C(),v=V(),n=f(),t=f(!1),s=E({username:"",password:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},i=async()=>{n.value&&await n.value.validate(async p=>{if(p){t.value=!0;try{const e=await U(s);v.login(e.token,e.userInfo),g.success("登录成功"),_.push("/")}catch(e){g.error(e.message||"登录失败")}finally{t.value=!1}}})};return(p,e)=>{const c=l("el-input"),u=l("el-form-item"),h=l("el-button"),b=l("el-form");return x(),k("div",q,[r("div",A,[e[2]||(e[2]=r("div",{class:"login-header"},[r("h1",null,"春节攻略管理后台"),r("p",null,"Spring Festival Guide Admin")],-1)),o(b,{ref_key:"formRef",ref:n,model:s,rules:w,class:"login-form",onSubmit:S(i,["prevent"])},{default:a(()=>[o(u,{prop:"username"},{default:a(()=>[o(c,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=d=>s.username=d),size:"large",placeholder:"请输入用户名","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),o(u,{prop:"password"},{default:a(()=>[o(c,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=d=>s.password=d),type:"password",size:"large",placeholder:"请输入密码","prefix-icon":"Lock","show-password":"",clearable:"",onKeyup:L(i,["enter"])},null,8,["modelValue"])]),_:1}),o(u,null,{default:a(()=>[o(h,{type:"primary",size:"large",loading:t.value,class:"login-btn",onClick:i},{default:a(()=>[z(B(t.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e[3]||(e[3]=r("div",{class:"login-footer"},[r("p",null,"默认账号: admin / admin123")],-1))])])}}}),j=R(F,[["__scopeId","data-v-5dd89cec"]]);export{j as default};
