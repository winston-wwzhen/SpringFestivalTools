import{a as I}from"./audit-BT_iBJv-.js";import{d as N,v as Y,o as r,c as u,a as i,b as e,w as o,z as R,l as U,i as z,j as k,r as s,A as H,h as _,t as g,x as P}from"./index-R19cZ3W8.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-D8AmjcuC.js";const q={class:"log-list-page page-container"},F={class:"search-form"},G={class:"search-form-item"},J={class:"card"},K={key:0},O={key:1},Q={key:0},W={key:1},X={class:"pagination-container"},Z=N({__name:"LogList",setup($){const f=z(!1),y=z([]),m=k({resourceType:""}),l=k({page:1,pageSize:20,total:0}),x={redpack:"红包活动",gala_platform:"春晚平台",gala_program:"春晚节目",emoticon:"表情包",kinship:"亲戚称呼"},v={approve:{text:"通过",type:"success"},reject:{text:"拒绝",type:"danger"},delete:{text:"删除",type:"warning"},edit:{text:"编辑",type:"info"}},h={pending:"待审核",approved:"已通过",rejected:"已拒绝"},c=async()=>{f.value=!0;try{const p={resourceType:m.resourceType||void 0,page:l.page,pageSize:l.pageSize},a=await I(p);y.value=a.list,l.total=a.total}catch(p){console.error("加载数据失败:",p)}finally{f.value=!1}},T=()=>{l.page=1,c()},C=()=>{m.resourceType="",l.page=1,c()},D=p=>P(p).format("YYYY-MM-DD HH:mm:ss");return Y(()=>{c()}),(p,a)=>{const d=s("el-option"),L=s("el-select"),M=s("Search"),b=s("el-icon"),w=s("el-button"),V=s("RefreshLeft"),S=s("el-tag"),n=s("el-table-column"),j=s("el-table"),A=s("el-pagination"),B=H("loading");return r(),u("div",q,[a[6]||(a[6]=i("h2",{class:"page-title"},"审核日志",-1)),i("div",F,[i("div",G,[a[3]||(a[3]=i("label",null,"资源类型",-1)),e(L,{modelValue:m.resourceType,"onUpdate:modelValue":a[0]||(a[0]=t=>m.resourceType=t),placeholder:"全部",clearable:"",style:{width:"150px"}},{default:o(()=>[e(d,{label:"红包活动",value:"redpack"}),e(d,{label:"春晚平台",value:"gala_platform"}),e(d,{label:"春晚节目",value:"gala_program"}),e(d,{label:"表情包",value:"emoticon"}),e(d,{label:"亲戚称呼",value:"kinship"})]),_:1},8,["modelValue"])]),e(w,{type:"primary",onClick:T},{default:o(()=>[e(b,null,{default:o(()=>[e(M)]),_:1}),a[4]||(a[4]=_(" 搜索 ",-1))]),_:1}),e(w,{onClick:C},{default:o(()=>[e(b,null,{default:o(()=>[e(V)]),_:1}),a[5]||(a[5]=_(" 重置 ",-1))]),_:1})]),i("div",J,[R((r(),U(j,{data:y.value},{default:o(()=>[e(n,{prop:"resourceType",label:"资源类型",width:"120"},{default:o(({row:t})=>[e(S,{size:"small"},{default:o(()=>[_(g(x[t.resourceType]),1)]),_:2},1024)]),_:1}),e(n,{prop:"resourceId",label:"资源ID",width:"100"}),e(n,{prop:"action",label:"操作",width:"100"},{default:o(({row:t})=>[e(S,{type:v[t.action].type,size:"small"},{default:o(()=>[_(g(v[t.action].text),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"oldStatus",label:"原状态",width:"100"},{default:o(({row:t})=>[t.oldStatus?(r(),u("span",K,g(h[t.oldStatus]),1)):(r(),u("span",O,"-"))]),_:1}),e(n,{prop:"newStatus",label:"新状态",width:"100"},{default:o(({row:t})=>[t.newStatus?(r(),u("span",Q,g(h[t.newStatus]),1)):(r(),u("span",W,"-"))]),_:1}),e(n,{prop:"reason",label:"备注/理由","min-width":"200","show-overflow-tooltip":""}),e(n,{prop:"reviewerName",label:"审核人",width:"120"}),e(n,{prop:"ipAddress",label:"IP地址",width:"140"}),e(n,{prop:"createdAt",label:"操作时间",width:"180"},{default:o(({row:t})=>[_(g(D(t.createdAt)),1)]),_:1})]),_:1},8,["data"])),[[B,f.value]]),i("div",X,[e(A,{"current-page":l.page,"onUpdate:currentPage":a[1]||(a[1]=t=>l.page=t),"page-size":l.pageSize,"onUpdate:pageSize":a[2]||(a[2]=t=>l.pageSize=t),total:l.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"])])])])}}}),le=E(Z,[["__scopeId","data-v-22130c04"]]);export{le as default};
