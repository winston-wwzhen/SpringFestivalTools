import{d as L,u as O,v as Q,x as X,o as k,c as Z,a as t,b as a,w as o,t as n,n as S,y as $,r as c,i as D,j as B,h as f,z as F,l as j,q as tt,A as st,f as at}from"./index-BjjCTotM.js";import{h as w}from"./request-BusWrMDF.js";import{_ as ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";const et={class:"dashboard-page"},nt={class:"welcome-section"},lt={class:"user-info"},dt={class:"user-details"},it={class:"user-name"},rt={class:"user-role"},ct={class:"stat-card redpack"},ut={class:"stat-content"},vt={class:"stat-value"},pt={class:"stat-card gala-platform"},_t={class:"stat-content"},mt={class:"stat-value"},ft={class:"stat-card gala-program"},gt={class:"stat-content"},wt={class:"stat-value"},bt={class:"stat-card total"},ht={class:"stat-content"},yt={class:"stat-value"},kt={class:"nav-icon redpack"},St={class:"nav-arrow"},$t={class:"nav-icon gala"},Dt={class:"nav-arrow"},xt={class:"nav-icon crawler"},Ct={class:"nav-arrow"},Mt={class:"card activity-card"},zt={class:"card-header"},Pt={class:"countdown-info"},Tt={class:"countdown-grid"},Yt={class:"countdown-item"},It={class:"countdown-value"},Nt={class:"countdown-item"},Rt={class:"countdown-value"},At={class:"countdown-item"},Bt={class:"countdown-value"},Ft={class:"countdown-item"},jt={class:"countdown-value"},Ut={class:"countdown-date"},Vt={class:"card"},qt={class:"card-header"},Wt={class:"card"},Et={class:"card-header"},Gt={style:{"font-size":"24px"}},Ht="é©¬å¹´",Jt=L({__name:"Index",setup(Kt){at();const x=O(),g=D(!1),v=B({redpack:0,galaPlatform:0,galaProgram:0,total:0}),l=B({days:0,hours:0,minutes:0,seconds:0}),C=new Date().getFullYear(),U=tt(()=>l.days*86400+l.hours*3600+l.minutes*60+l.seconds<=0?"æ˜¥èŠ‚å¿«ä¹ï¼":"è·ç¦»æ˜¥èŠ‚è¿˜æœ‰"),V={super_admin:"è¶…çº§ç®¡ç†å‘˜",admin:"ç®¡ç†å‘˜",editor:"ç¼–è¾‘"},q={upcoming:"æœªå¼€å§‹",ongoing:"è¿›è¡Œä¸­",ended:"å·²ç»“æŸ"},W={upcoming:"info",ongoing:"success",ended:"info"},M=D([]),z=D([]);let b=null;const E=async()=>{g.value=!0;try{const e=await w.get("/admin/redpack/list",{page:1,pageSize:1});v.redpack=e.total||0;const s=await w.get("/admin/gala/platforms",{page:1,pageSize:1});v.galaPlatform=s.total||0,v.galaProgram=0,v.total=v.redpack+v.galaPlatform+v.galaProgram;const d=await w.get("/admin/redpack/list",{page:1,pageSize:5});M.value=d.list||[];const r=await w.get("/admin/gala/platforms",{page:1,pageSize:5});z.value=r.list||[].map(_=>({..._,programCount:0}))}catch(e){console.error("åŠ è½½ç»Ÿè®¡å¤±è´¥:",e)}finally{g.value=!1}},P=()=>{const e=$(),d=$(`${C}-01-29 00:00:00`).diff(e,"second");d>0?(l.days=Math.floor(d/86400),l.hours=Math.floor(d%86400/3600),l.minutes=Math.floor(d%3600/60),l.seconds=d%60):(l.days=0,l.hours=0,l.minutes=0,l.seconds=0)},G=e=>$(e).format("YYYY-MM-DD"),H=(e,s)=>{if(!e&&!s)return"-";let d="";if(e){const _=new Date(e),u=_.getFullYear(),m=String(_.getMonth()+1).padStart(2,"0"),h=String(_.getDate()).padStart(2,"0");d=`${u}-${m}-${h}`}const r=s||"";return d&&r?`${d} ${r.substring(0,5)}`:d||r};return Q(()=>{E(),P(),b=setInterval(P,1e3)}),X(()=>{b&&clearInterval(b)}),(e,s)=>{var R,A;const d=c("User"),r=c("el-icon"),_=c("el-avatar"),u=c("el-col"),m=c("el-row"),h=c("Wallet"),y=c("ArrowRight"),J=c("Monitor"),K=c("Connection"),T=c("el-tag"),Y=c("el-button"),p=c("el-table-column"),I=c("el-table"),N=st("loading");return k(),Z("div",et,[t("div",nt,[s[5]||(s[5]=t("div",{class:"welcome-content"},[t("h1",{class:"welcome-title"},"ðŸŽŠ æ˜¥èŠ‚å·¥å…·ç®¡ç†åŽå°"),t("p",{class:"welcome-subtitle"},"æ¬¢è¿Žä½¿ç”¨æ˜¥èŠ‚æ•°æ®ç®¡ç†ç³»ç»Ÿ")],-1)),t("div",lt,[a(_,{size:48,class:"user-avatar"},{default:o(()=>[a(r,null,{default:o(()=>[a(d)]),_:1})]),_:1}),t("div",dt,[t("div",it,n(((R=S(x).user)==null?void 0:R.realName)||"ç®¡ç†å‘˜"),1),t("div",rt,n(V[(A=S(x).user)==null?void 0:A.role]||"ç®¡ç†å‘˜"),1)])])]),a(m,{gutter:20,class:"stats-row"},{default:o(()=>[a(u,{xs:12,sm:12,md:6},{default:o(()=>[t("div",ct,[s[7]||(s[7]=t("div",{class:"stat-icon"},"ðŸ§§",-1)),t("div",ut,[t("div",vt,n(v.redpack),1),s[6]||(s[6]=t("div",{class:"stat-label"},"çº¢åŒ…æ´»åŠ¨",-1))])])]),_:1}),a(u,{xs:12,sm:12,md:6},{default:o(()=>[t("div",pt,[s[9]||(s[9]=t("div",{class:"stat-icon"},"ðŸ“º",-1)),t("div",_t,[t("div",mt,n(v.galaPlatform),1),s[8]||(s[8]=t("div",{class:"stat-label"},"æ˜¥æ™šå¹³å°",-1))])])]),_:1}),a(u,{xs:12,sm:12,md:6},{default:o(()=>[t("div",ft,[s[11]||(s[11]=t("div",{class:"stat-icon"},"ðŸŽ­",-1)),t("div",gt,[t("div",wt,n(v.galaProgram),1),s[10]||(s[10]=t("div",{class:"stat-label"},"æ˜¥æ™šèŠ‚ç›®",-1))])])]),_:1}),a(u,{xs:12,sm:12,md:6},{default:o(()=>[t("div",bt,[s[13]||(s[13]=t("div",{class:"stat-icon"},"ðŸ“Š",-1)),t("div",ht,[t("div",yt,n(v.total),1),s[12]||(s[12]=t("div",{class:"stat-label"},"æ€»æ•°æ®",-1))])])]),_:1})]),_:1}),a(m,{gutter:20,class:"quick-nav-row"},{default:o(()=>[a(u,{xs:24,sm:12,md:8},{default:o(()=>[t("div",{class:"nav-card",onClick:s[0]||(s[0]=i=>e.$router.push("/content/redpack"))},[t("div",kt,[a(r,null,{default:o(()=>[a(h)]),_:1})]),s[14]||(s[14]=t("div",{class:"nav-content"},[t("div",{class:"nav-title"},"çº¢åŒ…ç®¡ç†"),t("div",{class:"nav-desc"},"ç®¡ç†çº¢åŒ…æ´»åŠ¨ä¿¡æ¯")],-1)),t("div",St,[a(r,null,{default:o(()=>[a(y)]),_:1})])])]),_:1}),a(u,{xs:24,sm:12,md:8},{default:o(()=>[t("div",{class:"nav-card",onClick:s[1]||(s[1]=i=>e.$router.push("/content/gala"))},[t("div",$t,[a(r,null,{default:o(()=>[a(J)]),_:1})]),s[15]||(s[15]=t("div",{class:"nav-content"},[t("div",{class:"nav-title"},"æ˜¥æ™šç®¡ç†"),t("div",{class:"nav-desc"},"ç®¡ç†å¹³å°å’ŒèŠ‚ç›®")],-1)),t("div",Dt,[a(r,null,{default:o(()=>[a(y)]),_:1})])])]),_:1}),a(u,{xs:24,sm:12,md:8},{default:o(()=>[t("div",{class:"nav-card",onClick:s[2]||(s[2]=i=>e.$router.push("/crawler"))},[t("div",xt,[a(r,null,{default:o(()=>[a(K)]),_:1})]),s[16]||(s[16]=t("div",{class:"nav-content"},[t("div",{class:"nav-title"},"çˆ¬è™«ç®¡ç†"),t("div",{class:"nav-desc"},"æ•°æ®é‡‡é›†ä»»åŠ¡")],-1)),t("div",Ct,[a(r,null,{default:o(()=>[a(y)]),_:1})])])]),_:1})]),_:1}),a(m,{gutter:20},{default:o(()=>[a(u,{span:24},{default:o(()=>[t("div",Mt,[t("div",zt,[s[17]||(s[17]=t("h3",{class:"card-title"},"ðŸ“… æ˜¥èŠ‚å€’è®¡æ—¶",-1)),a(T,{type:"danger",size:"large",effect:"dark"},{default:o(()=>[f(n(U.value),1)]),_:1})]),t("div",Pt,[t("div",Tt,[t("div",Yt,[t("div",It,n(l.days),1),s[18]||(s[18]=t("div",{class:"countdown-label"},"å¤©",-1))]),s[22]||(s[22]=t("div",{class:"countdown-separator"},":",-1)),t("div",Nt,[t("div",Rt,n(l.hours),1),s[19]||(s[19]=t("div",{class:"countdown-label"},"æ—¶",-1))]),s[23]||(s[23]=t("div",{class:"countdown-separator"},":",-1)),t("div",At,[t("div",Bt,n(l.minutes),1),s[20]||(s[20]=t("div",{class:"countdown-label"},"åˆ†",-1))]),s[24]||(s[24]=t("div",{class:"countdown-separator"},":",-1)),t("div",Ft,[t("div",jt,n(l.seconds),1),s[21]||(s[21]=t("div",{class:"countdown-label"},"ç§’",-1))])]),t("div",Ut,"è·ç¦» "+n(S(C))+"å¹´æ˜¥èŠ‚ï¼ˆ"+n(Ht)+"ï¼‰",1)])])]),_:1})]),_:1}),a(m,{gutter:20,class:"overview-row"},{default:o(()=>[a(u,{xs:24,md:12},{default:o(()=>[t("div",Vt,[t("div",qt,[s[26]||(s[26]=t("h3",{class:"card-title"},"ðŸ§§ çº¢åŒ…æ´»åŠ¨",-1)),a(Y,{type:"primary",size:"small",onClick:s[3]||(s[3]=i=>e.$router.push("/content/redpack"))},{default:o(()=>[...s[25]||(s[25]=[f(" æŸ¥çœ‹å…¨éƒ¨ ",-1)])]),_:1})]),F((k(),j(I,{data:M.value,style:{width:"100%"}},{default:o(()=>[a(p,{prop:"platform",label:"å¹³å°",width:"120"}),a(p,{prop:"title",label:"æ´»åŠ¨åç§°","show-overflow-tooltip":""}),a(p,{prop:"status",label:"çŠ¶æ€",width:"100"},{default:o(({row:i})=>[a(T,{type:W[i.status],size:"small"},{default:o(()=>[f(n(q[i.status]),1)]),_:2},1032,["type"])]),_:1}),a(p,{prop:"endTime",label:"ç»“æŸæ—¶é—´",width:"120"},{default:o(({row:i})=>[f(n(G(i.endTime)),1)]),_:1})]),_:1},8,["data"])),[[N,g.value]])])]),_:1}),a(u,{xs:24,md:12},{default:o(()=>[t("div",Wt,[t("div",Et,[s[28]||(s[28]=t("h3",{class:"card-title"},"ðŸ“º æ˜¥æ™šå¹³å°",-1)),a(Y,{type:"primary",size:"small",onClick:s[4]||(s[4]=i=>e.$router.push("/content/gala"))},{default:o(()=>[...s[27]||(s[27]=[f(" æŸ¥çœ‹å…¨éƒ¨ ",-1)])]),_:1})]),F((k(),j(I,{data:z.value,style:{width:"100%"}},{default:o(()=>[a(p,{label:"å›¾æ ‡",width:"60"},{default:o(({row:i})=>[t("span",Gt,n(i.emoji||"ðŸ“º"),1)]),_:1}),a(p,{prop:"name",label:"å¹³å°åç§°"}),a(p,{prop:"programCount",label:"èŠ‚ç›®æ•°",width:"80"}),a(p,{prop:"broadcastTime",label:"æ’­å‡ºæ—¶é—´",width:"150"},{default:o(({row:i})=>[f(n(H(i.airDate,i.airTime)),1)]),_:1})]),_:1},8,["data"])),[[N,g.value]])])]),_:1})]),_:1})])}}}),Xt=ot(Jt,[["__scopeId","data-v-5b84d619"]]);export{Xt as default};
