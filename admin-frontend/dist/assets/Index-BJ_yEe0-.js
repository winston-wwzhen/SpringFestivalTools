import{g as B,a as L}from"./audit-SWBbGZlz.js";import{d as M,v as A,o as Y,c as z,a as s,b as e,w as o,r as n,j as I,i as N,t as i,h as p,x as V}from"./index-DknlLI1v.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-CMDQs0ai.js";const F={class:"dashboard-page"},H={class:"stat-card pending"},q={class:"stat-icon"},O={class:"stat-content"},R={class:"stat-value"},G={class:"stat-card approved"},J={class:"stat-icon"},K={class:"stat-content"},P={class:"stat-value"},Q={class:"stat-card rejected"},U={class:"stat-icon"},W={class:"stat-content"},X={class:"stat-value"},Z={class:"stat-card total"},tt={class:"stat-icon"},et={class:"stat-content"},st={class:"stat-value"},ot={class:"card"},at={class:"quick-actions"},nt={class:"card"},lt={class:"card-header"},dt=M({__name:"Index",setup(ct){const r=I({pending:0,approved:0,rejected:0,total:0}),f=N([]),b={redpack:"红包活动",gala_platform:"春晚平台",gala_program:"春晚节目",emoticon:"表情包",kinship:"亲戚称呼"},g={approve:{text:"通过",type:"success"},reject:{text:"拒绝",type:"danger"},delete:{text:"删除",type:"warning"},edit:{text:"编辑",type:"info"}},w=async()=>{try{const a=await B();let t=0,_=0,l=0;Object.values(a).forEach(d=>{t+=d.pending||0,_+=d.approved||0,l+=d.rejected||0}),r.pending=t,r.approved=_,r.rejected=l,r.total=t+_+l}catch(a){console.error("加载统计失败:",a)}},x=async()=>{try{const a=await L({page:1,pageSize:5});f.value=a.list}catch(a){console.error("加载日志失败:",a)}},h=a=>V(a).format("YYYY-MM-DD HH:mm:ss");return A(()=>{w(),x()}),(a,t)=>{const _=n("Clock"),l=n("el-icon"),d=n("el-col"),C=n("Select"),k=n("CloseBold"),j=n("DataLine"),m=n("el-row"),$=n("Document"),u=n("el-button"),D=n("Connection"),S=n("Folder"),y=n("el-tag"),v=n("el-table-column"),T=n("el-table");return Y(),z("div",F,[t[14]||(t[14]=s("h2",{class:"page-title"},"仪表盘",-1)),e(m,{gutter:20,class:"stats-row"},{default:o(()=>[e(d,{xs:24,sm:12,md:6},{default:o(()=>[s("div",H,[s("div",q,[e(l,null,{default:o(()=>[e(_)]),_:1})]),s("div",O,[s("div",R,i(r.pending||0),1),t[4]||(t[4]=s("div",{class:"stat-label"},"待审核",-1))])])]),_:1}),e(d,{xs:24,sm:12,md:6},{default:o(()=>[s("div",G,[s("div",J,[e(l,null,{default:o(()=>[e(C)]),_:1})]),s("div",K,[s("div",P,i(r.approved||0),1),t[5]||(t[5]=s("div",{class:"stat-label"},"已通过",-1))])])]),_:1}),e(d,{xs:24,sm:12,md:6},{default:o(()=>[s("div",Q,[s("div",U,[e(l,null,{default:o(()=>[e(k)]),_:1})]),s("div",W,[s("div",X,i(r.rejected||0),1),t[6]||(t[6]=s("div",{class:"stat-label"},"已拒绝",-1))])])]),_:1}),e(d,{xs:24,sm:12,md:6},{default:o(()=>[s("div",Z,[s("div",tt,[e(l,null,{default:o(()=>[e(j)]),_:1})]),s("div",et,[s("div",st,i(r.total||0),1),t[7]||(t[7]=s("div",{class:"stat-label"},"总数据",-1))])])]),_:1})]),_:1}),e(m,{gutter:20,class:"actions-row"},{default:o(()=>[e(d,{span:24},{default:o(()=>[s("div",ot,[t[11]||(t[11]=s("div",{class:"card-header"},[s("h3",{class:"card-title"},"快捷操作")],-1)),s("div",at,[e(u,{type:"primary",onClick:t[0]||(t[0]=c=>a.$router.push("/audit"))},{default:o(()=>[e(l,null,{default:o(()=>[e($)]),_:1}),t[8]||(t[8]=p(" 处理待审核 ",-1))]),_:1}),e(u,{onClick:t[1]||(t[1]=c=>a.$router.push("/crawler"))},{default:o(()=>[e(l,null,{default:o(()=>[e(D)]),_:1}),t[9]||(t[9]=p(" 爬虫管理 ",-1))]),_:1}),e(u,{onClick:t[2]||(t[2]=c=>a.$router.push("/content/redpack"))},{default:o(()=>[e(l,null,{default:o(()=>[e(S)]),_:1}),t[10]||(t[10]=p(" 红包管理 ",-1))]),_:1})])])]),_:1})]),_:1}),e(m,{gutter:20},{default:o(()=>[e(d,{span:24},{default:o(()=>[s("div",nt,[s("div",lt,[t[13]||(t[13]=s("h3",{class:"card-title"},"最新审核日志",-1)),e(u,{text:"",type:"primary",onClick:t[3]||(t[3]=c=>a.$router.push("/audit/logs"))},{default:o(()=>[...t[12]||(t[12]=[p(" 查看全部 ",-1)])]),_:1})]),e(T,{data:f.value,style:{width:"100%"}},{default:o(()=>[e(v,{prop:"resourceType",label:"资源类型",width:"120"},{default:o(({row:c})=>[e(y,{size:"small"},{default:o(()=>[p(i(b[c.resourceType]),1)]),_:2},1024)]),_:1}),e(v,{prop:"action",label:"操作",width:"100"},{default:o(({row:c})=>[e(y,{type:g[c.action].type,size:"small"},{default:o(()=>[p(i(g[c.action].text),1)]),_:2},1032,["type"])]),_:1}),e(v,{prop:"reason",label:"备注","show-overflow-tooltip":""}),e(v,{prop:"createdAt",label:"时间",width:"180"},{default:o(({row:c})=>[p(i(h(c.createdAt)),1)]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1})])}}}),ut=E(dt,[["__scopeId","data-v-ae4b40a8"]]);export{ut as default};
